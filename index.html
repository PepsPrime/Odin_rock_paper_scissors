<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock, Paper, Scissors</title>
</head>

<body>
    <button>Rock</button>
    <button>Paper</button>
    <button>Scissors</button>
    <div>Results :</div>
    <script>

        // Random choice 
        function getComputerChoice() {
            let randomChoice = Math.random()

            if (randomChoice <= (1 / 3)) {
                return "ROCK"
            } else if (randomChoice <= 2 / 3) {
                return "PAPER"
            } else {
                return "SCISSORS"
            }
        }

        let results = document.querySelector("div")
        function playGame() {
            function playRound(humanChoice, computerChoice) {

                let para = document.createElement("p")
                para.innerText = ` Computer choice : ${computerChoice}
             Your choice : ${humanChoice}`

                results.appendChild(para);
                switch (humanChoice) {
                    case "ROCK":
                        if (computerChoice == "PAPER") {
                            para.innerText = "You loose !"
                            results.appendChild(para);
                            computerScore++;
                        } else if (computerChoice == "SCISSORS") {
                            para.innerText = "You won !"
                            results.appendChild(para);
                            humanScore++;
                        } else {
                            para.innerText = "Ex aequo!"
                            results.appendChild(para);
                        }
                        break
                    case "PAPER":
                        if (computerChoice == "PAPER") {
                            para.innerText = "Ex aequo!"
                            results.appendChild(para);
                        } else if (computerChoice == "SCISSORS") {
                            para.innerText = "You loose !"
                            results.appendChild(para);
                            computerScore++;
                        } else {
                            para.innerText = "You won !"
                            results.appendChild(para);
                            humanScore++;
                        }
                        break
                    case "SCISSORS":
                        if (computerChoice == "PAPER") {
                            para.innerText = "You won !"
                            results.appendChild(para);
                            humanScore++;
                        } else if (computerChoice == "SCISSORS") {
                            para.innerText = "Ex aequo!"
                            results.appendChild(para);
                        } else {
                            para.innerText = "You loose !"
                            results.appendChild(para);
                            computerScore++;
                        }
                        break
                    default:
                        console.log("Unknown choice")
                }


                let finalPara = document.createElement("p")

                if (computerScore == 5) {
                    finalPara.innerText = `\nFinal score !\nVous : ${humanScore}\nOrdinateur : ${computerScore}`
                    results.appendChild(finalPara)
                    finalPara.innerText = "You loose the match"
                    results.appendChild(finalPara)
                    
                } else if (humanScore == 5) {
                    finalPara.innerText = `\nFinal score !\nVous : ${humanScore}\nOrdinateur : ${computerScore}`
                    results.appendChild(finalPara)
                    finalPara.innerText = "You won the match!"
                    results.appendChild(finalPara)
                }
            }


            const btn = document.querySelectorAll("button")

            let humanChoice = btn.forEach(function (element) {
                element.addEventListener("click", function (e) {
                    let paraRound = document.createElement("p");
                    paraRound.innerText = `Manche ${roundNumber++}\nVous : ${humanScore} ---- Ordinateur : ${computerScore}`
                    results.appendChild(paraRound);
                    switch (e.target.textContent.toUpperCase()) {
                        case "ROCK":
                            playRound("ROCK", getComputerChoice())
                            break;
                        case "PAPER":
                            playRound("PAPER", getComputerChoice())
                            break;
                        case "SCISSORS":
                            playRound("SCISSORS", getComputerChoice())
                            break;
                    }
                })
            }
            )

            let humanScore = 0
            let computerScore = 0
            let roundNumber = 1;




        }
        playGame()


    </script>
</body>

</html>